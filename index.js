(()=>{(function(){"use strict";var g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("k-inside",[e("k-view",{staticClass:"k-logger-view"},[e("k-header",[t._v(" "+t._s(t.$t("michnhokn.logger.title"))+" "),e("k-button-group",{attrs:{slot:"left"},slot:"left"},[e("k-button",{attrs:{icon:"refresh"},on:{click:t.reset}},[t._v(t._s(t.$t("michnhokn.logger.reset")))])],1),e("template",{slot:"right"},[e("k-pagination",{attrs:{align:"right",details:!0,page:t.page,limit:t.limit,total:t.total},on:{paginate:t.paginate}})],1)],2),e("k-grid",{attrs:{gutter:"medium"}},[e("k-column",{attrs:{width:"2/6"}},[e("k-select-field",{attrs:{options:t.userOptions,label:t.$t("user"),type:"select",icon:"angle-down"},model:{value:t.filter.user,callback:function(l){t.$set(t.filter,"user",l)},expression:"filter.user"}})],1),e("k-column",{attrs:{width:"1/6"}},[e("k-date-field",{attrs:{display:"YYYY-MM-DD",label:t.$t("date"),calendar:!0,type:"date"},model:{value:t.filter.timestamp,callback:function(l){t.$set(t.filter,"timestamp",l)},expression:"filter.timestamp"}})],1),e("k-column",{attrs:{width:"1/6"}},[e("k-select-field",{attrs:{options:t.typeOptions,label:t.$t("michnhokn.logger.type"),type:"select",icon:"angle-down"},model:{value:t.filter.type,callback:function(l){t.$set(t.filter,"type",l)},expression:"filter.type"}})],1),e("k-column",{attrs:{width:"1/6"}},[e("k-select-field",{attrs:{options:t.actionOptions,label:t.$t("michnhokn.logger.action"),type:"select",icon:"angle-down"},model:{value:t.filter.action,callback:function(l){t.$set(t.filter,"action",l)},expression:"filter.action"}})],1),e("k-column",{attrs:{width:"1/6"}},[e("k-select-field",{attrs:{options:t.languageOptions,label:t.$t("language"),type:"select",icon:"angle-down"},model:{value:t.filter.language,callback:function(l){t.$set(t.filter,"language",l)},expression:"filter.language"}})],1),e("k-column",{attrs:{width:"1/3"}},[e("k-text-field",{attrs:{type:"text",label:t.$t("michnhokn.logger.slug"),placeholder:"Suche ...",icon:"search"},model:{value:t.filter.slug,callback:function(l){t.$set(t.filter,"slug",l)},expression:"filter.slug"}})],1),e("k-column",{attrs:{width:"1/3"}},[e("k-text-field",{attrs:{type:"text",label:t.$t("michnhokn.logger.searchOld"),placeholder:t.$t("search"),icon:"search"},model:{value:t.filter.oldSearch,callback:function(l){t.$set(t.filter,"oldSearch",l)},expression:"filter.oldSearch"}})],1),e("k-column",{attrs:{width:"1/3"}},[e("k-text-field",{attrs:{type:"text",label:t.$t("michnhokn.logger.searchNew"),placeholder:t.$t("search"),icon:"search"},model:{value:t.filter.newSearch,callback:function(l){t.$set(t.filter,"newSearch",l)},expression:"filter.newSearch"}})],1),e("k-column",{staticStyle:{overflow:"auto"},attrs:{width:"1/1"}},[t.logs.length?e("table",{staticClass:"k-system-plugins"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"175px"}},[t._v(t._s(t.$t("date")))]),e("th",[t._v(t._s(t.$t("user")))]),e("th",{staticStyle:{width:"70px"}},[t._v(t._s(t.$t("michnhokn.logger.type")))]),e("th",{staticStyle:{width:"140px"}},[t._v(t._s(t.$t("michnhokn.logger.action")))]),e("th",[t._v(t._s(t.$t("michnhokn.logger.slug")))]),e("th",{staticStyle:{width:"90px"}},[t._v(t._s(t.$t("language")))]),e("th",[t._v(t._s(t.$t("michnhokn.logger.old")))]),e("th",[t._v(t._s(t.$t("michnhokn.logger.new")))])])]),e("tbody",t._l(t.logs,function(l){return e("tr",{key:l.id},[e("td",[t._v(t._s(l.timestamp))]),e("td",[t._v(t._s(l.user))]),e("td",[t._v(t._s(l.type))]),e("td",[t._v(t._s(l.action))]),e("td",[t._v(t._s(l.slug))]),e("td",[t._v(t._s(l.language))]),e("td",[t._v(t._s(l.oldData))]),e("td",[t._v(t._s(l.newData))])])}),0)]):e("k-empty",{attrs:{icon:"table",layout:"cards"}},[t._v(t._s(t.$t("michnhokn.logger.empty")))])],1)],1)],1)],1)},p=[],b="";function f(t,a,e,l,o,c,h,$){var i=typeof t=="function"?t.options:t;a&&(i.render=a,i.staticRenderFns=e,i._compiled=!0),l&&(i.functional=!0),c&&(i._scopeId="data-v-"+c);var s;if(h?(s=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(h)},i._ssrRegister=s):o&&(s=$?function(){o.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(i.functional){i._injectStyles=s;var y=i.render;i.render=function(w,d){return s.call(d),y(w,d)}}else{var u=i.beforeCreate;i.beforeCreate=u?[].concat(u,s):[s]}return{exports:t,options:i}}const _={name:"LoggerArea",props:["userOptions","typeOptions","actionOptions","languageOptions"],data(){return{logs:[],total:0,page:1,limit:10,filter:{timestamp:"",oldSearch:"",newSearch:"",action:"",type:"",user:"",slug:"",language:""}}},mounted(){this.fetch(this.page,this.limit)},watch:{filter:{handler(t){this.fetch(this.page,this.limit,t)},deep:!0}},methods:{fetch(t=1,a=10,e=null){return this.$api.post("logs.json",{page:t,limit:a,filter:e}).then(l=>{this.logs=l.logs,this.total=l.total})},paginate({page:t,limit:a}){this.page=t,this.limit=a,this.fetch(t,a)},reset(){this.filter={timestamp:"",oldSearch:"",newSearch:"",action:"",type:"",user:"",slug:"",language:""}}}},r={};var m=f(_,g,p,!1,k,"bfa507fc",null,null);function k(t){for(let a in r)this[a]=r[a]}var v=function(){return m.exports}();window.panel.plugin("michnhokn/logger",{components:{"k-logger-area":v}})})();})();
